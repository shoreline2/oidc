services:
  semaphore:
    ports:
      - 3000:3000
    image: semaphoreui/semaphore
    volumes:
      - ./semaphore_config:/etc/semaphore
  oidc:
    build: .
    ports:
      - 4000:4000
    volumes:
      - ./:/app
    secrets:
      - private_pem
    environment:
      PRIVATE_KEY_PATH: "/run/secrets/private_pem"
secrets:
  private_pem:
    file: ./pki/private.pem
